"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.githubRelativizePath = exports.githubGetPullRequestNumber = exports.githubGetSha = exports.githubIsPullRequest = void 0;
var github_1 = require("@actions/github");
var prEvents = ['pull_request', 'pull_request_review', 'pull_request_review_comment'];
function githubIsPullRequest() {
    return prEvents.includes(github_1.context.eventName);
}
exports.githubIsPullRequest = githubIsPullRequest;
function githubGetSha() {
    var sha = github_1.context.sha;
    if (githubIsPullRequest()) {
        var pull = github_1.context.payload.pull_request;
        if (pull === null || pull === void 0 ? void 0 : pull.head.sha) {
            sha = pull === null || pull === void 0 ? void 0 : pull.head.sha;
        }
    }
    return sha;
}
exports.githubGetSha = githubGetSha;
function githubGetPullRequestNumber() {
    var pr_number = undefined;
    if (githubIsPullRequest()) {
        var pull = github_1.context.payload.pull_request;
        if (pull === null || pull === void 0 ? void 0 : pull.number) {
            pr_number = pull.number;
        }
    }
    return pr_number;
}
exports.githubGetPullRequestNumber = githubGetPullRequestNumber;
function githubRelativizePath(path) {
    var _a;
    var length = (_a = process.env.GITHUB_WORKSPACE) === null || _a === void 0 ? void 0 : _a.length;
    if (!length) {
        length = 'undefined'.length;
    }
    return path.substring(length + 1);
}
exports.githubRelativizePath = githubRelativizePath;
